#!/usr/bin/env ruby
# coding: utf-8

require "benchmark"
require "byk"
require "srbovanje"
require "open-uri"

pangram = "Фијуче ветар у шибљу, леди пасаже и куће иза њих и гунђа у оџацима."
ascii   = "The quick brown fox jumps over the lazy dog."
mixed   = "1, 2, 3. Malo ћирилица, мало latinica;"
article = ""

open("http://www.politika.rs/") { |io| article = io.read }

samples = {
  :empty   => "",
  :pangram => pangram * 100,
  :ascii   => ascii   * 100,
  :mixed   => mixed   * 100,
  :long    => article
}

n = 100

Benchmark.bmbm do |x|
  samples.each do |label, text|
    x.report("Srbovanje -- #{label}:") { n.times { text.latinicom } }
    x.report("Byk       -- #{label}:") { n.times { text.to_latin  } }
  end
end

=begin
                            user     system      total        real
Srbovanje -- empty:     0.000000   0.000000   0.000000 (  0.000255)
Byk       -- empty:     0.000000   0.000000   0.000000 (  0.000016)
Srbovanje -- pangram:   0.460000   0.000000   0.460000 (  0.466208)
Byk       -- pangram:   0.080000   0.010000   0.090000 (  0.081218)
Srbovanje -- ascii:     0.280000   0.000000   0.280000 (  0.285615)
Byk       -- ascii:     0.040000   0.000000   0.040000 (  0.042021)
Srbovanje -- mixed:     0.260000   0.000000   0.260000 (  0.263672)
Byk       -- mixed:     0.040000   0.000000   0.040000 (  0.037563)
Srbovanje -- long:      4.220000   0.020000   4.240000 (  4.250494)
Byk       -- long:      0.570000   0.000000   0.570000 (  0.580039)

=end
